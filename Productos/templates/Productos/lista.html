{% extends "base.html" %} {% block content %}
<h1>Lista de productos</h1>

{% if user.is_authenticated %}
<p>Bienvenido, {{ user.username }}</p>
<div style="margin-bottom: 20px">
  <!-- Botón para agregar productos al pedido -->
  <a
    href="{% url 'agregar_producto' %}"
    style="
      display: inline-block;
      padding: 10px 20px;
      background-color: #4caf50;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-weight: bold;
    "
  >
    Agregar Productos al Pedido
  </a>
</div>

<form method="POST" action="{% url 'logout' %}">
  {% csrf_token %}
  <button
    type="submit"
    style="
      padding: 5px 10px;
      background-color: #f44336;
      color: white;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    "
  >
    Cerrar Sesión
  </button>
</form>
{% else %}
<p>No has iniciado sesión.</p>
{% endif %} {% if productos %}
<ul>
  {% for producto in productos %}
  <li>
    <strong>{{ producto.nombre }}</strong> - ${{ producto.precio }}
    <p>{{ producto.descripcion }}</p>
    <p>Stock: {{ producto.stock }}</p>
    {% if producto.imagen %}
    <img
      src="{{ producto.imagen.url }}"
      alt="{{ producto.nombre }}"
      width="100"
    />
    {% else %}
    <p>Sin imagen</p>
    {% endif %}

    <!-- Botón para agregar este producto específico al pedido -->
    <a
      href="{% url 'agregar_producto' %}?producto_id={{ producto.codigo }}"
      style="
        display: inline-block;
        margin-top: 10px;
        padding: 5px 10px;
        background-color: #2196f3;
        color: white;
        text-decoration: none;
        border-radius: 3px;
        font-size: 14px;
      "
    >
      Agregar al Pedido
    </a>
  </li>
  <hr />
  {% endfor %}
</ul>
{% else %}
<p>No hay productos disponibles.</p>
{% endif %} {% endblock content %}
